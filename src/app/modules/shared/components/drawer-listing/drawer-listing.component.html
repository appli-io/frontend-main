<div class="flex flex-col w-full h-full">
  <mat-drawer-container class="flex-auto sm:h-full">
    <!-- Drawer -->
    <mat-drawer
      #drawer
      [autoFocus]="false"
      [mode]="drawerMode"
      [opened]="drawerOpened"
      class="dark:bg-gray-900 sm:w-96"
    >
      <!-- Header -->
      <div class="m-8 mr-6 flex items-center justify-between sm:my-10">
        <!-- Title -->
        <h2 [innerText]="title" class="text-3xl font-extrabold leading-none tracking-tight"></h2>
        <!-- Close button -->
        <div class="lg:hidden">
          <button (click)="drawer.close()" mat-icon-button>
            <mat-icon
              [svgIcon]="'heroicons_outline:x-mark'"
            ></mat-icon>
          </button>
        </div>
      </div>
      <!-- Panel links -->
      <div class="flex flex-col divide-y border-b border-t">
        @for (panel of panels; track trackByFn($index, panel)) {
          <a
            class="flex cursor-pointer px-8 py-5 dark:hover:bg-hover hover:bg-gray-100"
            [routerLink]="panel.link"
            [routerLinkActive]="['bg-primary-50', 'dark:bg-hover']"
            [routerLinkActiveOptions]="{ exact: true }"
            (click)="goToPanel(panel.id)"
            [disabled]="panel.disabled"
          >
            <mat-icon
              class="text-hint"
              [routerLinkActive]="['text-primary', 'dark:text-primary-500']"
              [routerLinkActiveOptions]="{ exact: true }"
              [svgIcon]="panel.icon"
            ></mat-icon>
            <div class="ml-3">
              <div
                class="font-medium leading-6"
                [routerLinkActive]="['text-primary', 'dark:text-primary-500']"
                [routerLinkActiveOptions]="{ exact: true }"
              >
                {{ panel.title }}
              </div>
              <div class="text-secondary mt-0.5">
                {{ panel.description }}
              </div>
            </div>
          </a>
        }
      </div>
    </mat-drawer>

    <!-- Drawer content -->
    <mat-drawer-content class="flex flex-col bg-transparent">
      @if (headerComponent) {
        <ng-content select="drawer-header"></ng-content>
      }

      <!-- Main -->
      <div class="flex flex-col w-full">
        <!-- Panel header -->
        <div class="lg:hidden flex flex-row items-center w-full max-w-xs sm:max-w-5xl m-4">
          <!-- Drawer toggle -->
          <button (click)="drawer.toggle()" mat-icon-button>
            <mat-icon [svgIcon]="'heroicons_outline:bars-3'"></mat-icon>
          </button>

          <!-- Panel title -->
          <h3 class="ml-2 text-3xl font-bold leading-none tracking-tight lg:ml-0 self-center">
            {{ title }}
          </h3>
        </div>

        <!-- Load settings panel -->
        <div class="">
          @if (contentComponent) {
            <ng-content select="drawer-content"></ng-content>
          }
        </div>
      </div>
    </mat-drawer-content>
  </mat-drawer-container>
</div>
