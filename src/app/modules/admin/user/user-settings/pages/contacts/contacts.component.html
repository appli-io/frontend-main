<div *transloco="let t; read: 'user.settings.contacts'" class="flex flex-col min-w-0 w-full">
  <page-header
    [description]="t('subtitle')"
    [subtitle]="t('title')"
  ></page-header>
  <!-- Content -->
  <div class="flex flex-col justify-center w-full sm:max-w-5xl mx-auto py-6 gap-y-4 px-4">
    <form [formGroup]="form" class="flex flex-col space-y-8">
      <div class="space-y-4">
        <div class="">
          <h2 class="font-semibold text-xl inline-flex items-center gap-x-2">
            <mat-icon svgIcon="heroicons_outline:at-symbol"></mat-icon>
            {{ t('email-list') }}
          </h2>
          <p [innerText]="t('email-list-description')" class="text-hint"></p>
        </div>

        <div class="bg-card rounded p-4 md:p-8 pb-4 shadow w-full">
          <div class="space-y-4">
            @for (email of form.get('emails')['controls']; track trackByFn($index, email)) {
              <div class="flex">
                <mat-form-field class="flex-auto" floatLabel="always">
                  <mat-label>Email</mat-label>
                  <mat-icon matPrefix class="hidden icon-size-5 sm:flex" [svgIcon]="'heroicons_solid:envelope'"></mat-icon>
                  <input matInput [formControl]="email.get('email')" [placeholder]="'Email address'" [spellcheck]="false"/>
                </mat-form-field>
                <mat-form-field class="ml-2 w-full max-w-24 flex-auto sm:ml-4 sm:max-w-40" floatLabel="always">
                  <mat-label>Label</mat-label>
                  <mat-icon matPrefix class="hidden icon-size-5 sm:flex" [svgIcon]="'heroicons_solid:tag'"></mat-icon>
                  <input matInput [formControl]="email.get('label')" [placeholder]="'Label'"/>
                </mat-form-field>
                <!-- Remove email -->
                @if (!($first && $last)) {
                  <div class="flex w-10 items-center pl-2">
                    <button class="h-8 min-h-8 w-8" color="warn" mat-icon-button (click)="removeEmailField($index)" matTooltip="Remove">
                      <mat-icon class="icon-size-5" [svgIcon]=" 'heroicons_solid:trash'"></mat-icon>
                    </button>
                  </div>
                }
              </div>
            }
          </div>
          <button (click)="addEmailField()" class="group inline-flex items-center rounded px-4 py-2 gap-x-2" color="primary" mat-button>
            <mat-icon [svgIcon]="'heroicons_solid:plus-circle'" class="icon-size-5"></mat-icon>
            <span class="font-medium">Add an email address</span>
          </button>
        </div>
      </div>

      <div class="space-y-4">
        <div class="">
          <h2 class="font-semibold text-xl inline-flex items-center gap-x-2">
            <mat-icon svgIcon="heroicons_outline:device-phone-mobile"></mat-icon>
            {{ t('phone-list') }}
          </h2>
          <p [innerText]="t('phone-list-description')" class="text-hint"></p>
        </div>

        <div class="bg-card rounded p-8 pb-4 shadow w-full">

        </div>
      </div>
    </form>
  </div>
</div>
